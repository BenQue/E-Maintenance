# 6. 组件

后端按职责划分为 UserService, WorkOrderService, AssetService 三个核心微服务。前端分为 WebApp (Next.js)和 MobileApp (Flutter)两个应用。

## 核心组件架构

### 6.1 WorkOrderService - 照片存储组件

**PhotoStorageService** - 工单照片存储服务
- 负责移动端上传照片的服务器端存储
- 支持按年月分类的文件系统存储
- 自动生成缩略图提升PC端加载性能
- 提供照片访问API端点

**主要功能:**
- 照片文件存储到 `/uploads/work-orders/YYYY/MM/` 目录
- 缩略图生成存储到对应的 `/thumbnails/` 子目录  
- 支持JPEG、PNG、GIF、WebP等图片格式
- 文件大小限制10MB，单次最多5张照片

### 6.2 Web前端组件

**WorkOrderPhotos组件** - PC端照片展示
- 网格式照片缩略图展示
- 照片详情模态框查看
- 支持照片放大和原图下载
- 响应式设计适配不同屏幕

### 6.3 移动端组件

**PhotoCaptureScreen** - 照片拍摄组件 (已实现)
- 相机权限管理和初始化
- 照片拍摄和相册选择
- 照片预览和确认界面

**WorkOrderService.uploadPhoto** - 照片上传服务 (待实现)
- HTTP MultipartFile上传
- 离线缓存和同步功能
- 上传进度和错误处理
